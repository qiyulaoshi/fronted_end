# 建立一个名为CI的工作流
name: CI

# 监听 master上的push事件
on:
  push:
  branches: [ master ]

# 开始任务
jobs:
   deploy:
       runs-on: ubuntu-latest
       steps:
              - name: Checkout code
              uses: actions/checkout@v2

              - name: Install dependencies
              run: |
                     npm install

              - name: Build and bundle static files
              run: |
                     npm run build

              - name: Upload to server
              uses: appleboy/scp-action@master


              with:
              host: ${{ secrets.TG_HOST }}
              username: ${{ secrets.TG_USER }}
              password: ${{ secrets.TG_PASS }}
              connect_timeout: 10s
              source: './dist/*'
              remote: /www/wwwroot/qiushui/fronted_end/dist/